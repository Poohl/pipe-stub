# settings: loop on entry true, entry on loop false, default-transition: loop

[
  { # get device info
    entry: "a201010000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8202.*": accept
  },
  { # set shipment low power state
    entry: "a201020000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8208.*": accept
  },
  { # spi flash read
    entry: "a201030000000000000000100060000010000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................9010.*": accept
  },
  { # set input mode
    entry: "a201050000000000014040033000000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8003.*": accept
  },
  { # enable IMU
    entry: "a2010d0000000000000000400200000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8040.*": accept
  },
  { # enable vibration
    entry: "a2010e0000000000000000480100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8048.*": accept
  },
  { # set NFC MCU state
    entry: "a2010f00000000c2000f40220100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8022.*": accept
  },
  { # set player lights
    entry: "a201010000000000000000300100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8030.*": accept
  },
  { # set NFC MCU config
    entry: "a201020000000000000000212100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8021.*": accept
  },
  { # set NFC MCU state
    entry: "a201030000000000000000220000000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8022.*": accept
  },
  # the real part statrs here
  { # set input mode
    entry: "a2010e0000000000000000033100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8003.*": accept
  },
  { # set NFC state
    entry: "a201000000000000000000220100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a121........................8022.*": accept
  },
  { # wait for mcu ready
    loop: "a2110100000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a131................................................................................................ff.*": ignore
    "a131................................................................................................01............01.*": accept
  },
  { # set NFC config
    entry: "a2010c00000000000000002121000400000000000000000000000000000000000000000000000000000000000000000000a2",
    "a121........................a021.*": accept
  },
  { # wait for mcu -> nfc
    loop: "a2110000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000",
    "a131................................................................................................ff.*": ignore
    "a131................................................................................................01............04.*": accept
  },
  { # wait for nfc ready
    loop: "a2110400000000000000000204000008000000000000000000000000000000000000000000000000000000000000000087",
    "a131................................................................................................2a............00.*": accept
  },
  { # start polling
    entry: "a2110500000000000000000201000008050000002c0100000000000000000000000000000000000000000000000000009a",
    loop: "0a20350031004100a2110600000000000140400204000008000000000000000000000000000000000000000000000000000000000000000087",
    "a131................................................................................................2a............09..............07047667e21f6680.*": accept
  },
  { # stop polling
    entry: "a2110a00000000000000000202000008000000000000000000000000000000000000000000000000000000000000000050",
    loop: "a2110b00000000000000000204000008000000000000000000000000000000000000000000000000000000000000000087",
    "a131................................................................................................2a............00.*": accept
    ".*": loop
  },
  { # different start polling
    entry: "0a20350031004100a21108000000000000000002010000080500e8032c01000000000000000000000000000000000000000000000000000012",
    loop: "a2110b00000000000000000204000008000000000000000000000000000000000000000000000000000000000000000087",
    "a131................................................................................................2a............09..............07047667e21f6680.*": accept
    ".*": loop
  },
  { # read and buffer ntag
    entry: "0a20350031004100a211080000000000000000020600000813d007047667e21f668001010303000000000000000000000000000000000000d3",
        "a131................................................................................................3a....01......02............07047667e21f6680..........................................................................................f10ffee.*": accept
  },
    # what happened to indentation? I dont know. IntelliJ is idiotic. also problems nonexistant with hard tabs....
    { # wait for ready for write
        loop: "a21102000000000000000002040001080000000000000000000000000000000000000000000000000000000000000000d3",
        "a131................................................................................................2a............04..............07047667e21f6680.*": accept
        ".*": loop
    },
    { # actual writing
        loop: "a21105000000000000000002080100001fd007047667e21f668001000104ffffffffa500010003052083088d73ff35888e",
        "a131................................................................................................2a00050001.*": accept
    },
    {
        loop: "a21106000000000001404002080200001f9e4208775bd8d12925b1896e95c882c9237fda5c0876b2de2820f05caa6db7d8",
        "a131................................................................................................2a00050002.*": accept
    },
    {
        loop: "a21107000000000000000002080300001f0d4f3a7471c8ccda4011b3596d7cc5c08d3330ee120d62c6c341726af6c74566",
        "a131................................................................................................2a00050003.*": accept
    },
    {
        loop: "a21108000000000000000002080400001f8f9f938145ad6aa1f6c2af2919e03d171c4904185702fa9068f085cb4505b4da",
        "a131................................................................................................2a00050004.*": accept
    },
    {
        loop: "a21101000000000000000002080500001feff60973335619c7df36518838daddd889c6388e4a671168044b9d282211f0cb",
        "a131................................................................................................2a00050005.*": accept
    },
    {
        loop: "a21106000000000001404002080600001f86fed223514adf96ff3f08ee6719155f836ec96b935c38aac0666bfd5f6bcdff",
        "a131................................................................................................2a00050006.*": accept
    },
    {
        loop: "a21107000000000000000002080700001fa9d34063fc121bb3cb469d7cdd6efa6230fc1378cf39ae6c3ea809f13a529713",
        "a131................................................................................................2a00050007.*": accept
    },
    {
        loop: "a21108000000000000000002080800001f95af91a626f3736e0bb2494626e5324d54f7f992e268b534795dea8e6565764a",
        "a131................................................................................................2a00050008.*": accept
    },
    {
        loop: "a21109000000000000000002080900001f76efa5e222ddf2ea869e36aa5caba6da22f361de7458ae9be30c90822624df70",
        "a131................................................................................................2a00050009.*": accept
    },
    {
        loop: "a2110a000000000000000002080a00001f78643e692227dba98976061b2956cc00bcddef5c98615527b4c63b6d1ef1d7b8",
        "a131................................................................................................2a0005000a.*": accept
    },
    {
        loop: "a2110b000000000000000002080b00001f5310cbaf6340a80e5df15ab43bb963c4fc4c16659623cb5deb5fa7ddddfde8fc",
        "a131................................................................................................2a0005000b.*": accept
    },
    {
        loop: "a2110c000000000000000002080c00001f4f65afd43cb7077abf4e22f8c27c9058f83f962b4beee3fdcb7e311eba10a241",
        "a131................................................................................................2a0005000c.*": accept
    },
    {
        loop: "a2110d000000000000000002080d00001fac6cbb0080694c4491fbabb6db12cd01e2d9aef3e2ce7dc2ef41f869633315cf",
        "a131................................................................................................2a0005000d.*": accept
    },
    {
        loop: "a2110e000000000001404002080e00001fefa60d3abccd118e4428fe6853bb620564fe3da619ce06706a38c4826a00711e",
        "a131................................................................................................2a0005000e.*": accept
    },
    {
        loop: "a2110a000000000000000002080f00081408107a2765c8c79be7b3f19b530e8c3775f300000000000000000000000000d3",
        "a131................................................................................................2a0005000f.*": accept
    },
    {# done, now processing:
        loop: "a2110c00000000000000000204000008000000000000000000000000000000000000000000000000000000000000000087"
    }
]
